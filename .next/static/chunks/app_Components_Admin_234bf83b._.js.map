{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/app/Components/Admin/Login.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"avatarPlaceholder\": \"Login-module__s0XIVa__avatarPlaceholder\",\n  \"buttonLoading\": \"Login-module__s0XIVa__buttonLoading\",\n  \"cardFooter\": \"Login-module__s0XIVa__cardFooter\",\n  \"cardHeader\": \"Login-module__s0XIVa__cardHeader\",\n  \"dashboardContainer\": \"Login-module__s0XIVa__dashboardContainer\",\n  \"dashboardFooter\": \"Login-module__s0XIVa__dashboardFooter\",\n  \"dashboardHeader\": \"Login-module__s0XIVa__dashboardHeader\",\n  \"error\": \"Login-module__s0XIVa__error\",\n  \"footerLinks\": \"Login-module__s0XIVa__footerLinks\",\n  \"formStep\": \"Login-module__s0XIVa__formStep\",\n  \"inputGroup\": \"Login-module__s0XIVa__inputGroup\",\n  \"loginCard\": \"Login-module__s0XIVa__loginCard\",\n  \"loginForm\": \"Login-module__s0XIVa__loginForm\",\n  \"mainContent\": \"Login-module__s0XIVa__mainContent\",\n  \"message\": \"Login-module__s0XIVa__message\",\n  \"otpIcon\": \"Login-module__s0XIVa__otpIcon\",\n  \"otpInstructions\": \"Login-module__s0XIVa__otpInstructions\",\n  \"resendButton\": \"Login-module__s0XIVa__resendButton\",\n  \"spin\": \"Login-module__s0XIVa__spin\",\n  \"spinner\": \"Login-module__s0XIVa__spinner\",\n  \"submitButton\": \"Login-module__s0XIVa__submitButton\",\n  \"success\": \"Login-module__s0XIVa__success\",\n  \"userAvatar\": \"Login-module__s0XIVa__userAvatar\",\n  \"userInfo\": \"Login-module__s0XIVa__userInfo\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/admin/Desktop/it/app/Components/Admin/Login.jsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { signIn } from 'next-auth/react';\r\nimport { useRouter } from 'next/navigation';\r\nimport Image from 'next/image';\r\nimport styles from './Login.module.css';\r\n\r\nexport default function AdminLogin() {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [role, setRole] = useState('');\r\n  const [otp, setOtp] = useState('');\r\n  const [step, setStep] = useState(1);\r\n  const [message, setMessage] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const router = useRouter();\r\n  const otpRef = useRef(null);\r\n\r\n  // Auto-focus OTP input when step 2 begins\r\n  useEffect(() => {\r\n    if (step === 2 && otpRef.current) {\r\n      otpRef.current.focus();\r\n    }\r\n  }, [step]);\r\n\r\n  // Submit form\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setMessage('');\r\n\r\n    // Build signIn payload\r\n    const credentials = {\r\n      redirect: false,\r\n      email: email.trim(),\r\n      password,\r\n      role,\r\n      ...(step === 2 && { otp: otp.trim() }),\r\n    };\r\n\r\n    const res = await signIn('credentials', credentials);\r\n    setLoading(false);\r\n\r\n    if (res?.error) {\r\n      try {\r\n        const err = JSON.parse(res.error);\r\n\r\n        // Server says OTP is required\r\n        if (err.code === 'OTP_REQUIRED') {\r\n          setStep(2);\r\n          setMessage('✅ OTP sent to your email. Please enter it below.');\r\n        } else {\r\n          setMessage(`❌ ${err.message || 'Login failed'}`);\r\n        }\r\n      } catch {\r\n        setMessage(`❌ ${res.error}`);\r\n      }\r\n    } else {\r\n  // Redirect based on selected role\r\n  switch (role) {\r\n    case 'admin':\r\n      router.push('/admin/dashboard');\r\n      break;\r\n    case 'manager':\r\n      router.push('/manager/dashboard');\r\n      break;\r\n    case 'engineer':\r\n      router.push('/engineer/dashboard');\r\n      break;\r\n    default:\r\n      router.push('/'); // fallback\r\n  }\r\n}\r\n  };\r\n\r\n  // Resend OTP manually\r\n  const handleResendOtp = async () => {\r\n    setLoading(true);\r\n    setMessage('');\r\n\r\n    const res = await fetch('/api/auth/send-otp', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ email: email.trim(), role }),\r\n    });\r\n\r\n    const data = await res.json();\r\n    setLoading(false);\r\n\r\n    if (res.ok) {\r\n      setMessage('✅ OTP resent to your email.');\r\n    } else {\r\n      setMessage(`❌ ${data?.error || 'Failed to resend OTP.'}`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.dashboardContainer}>\r\n      <div className={styles.mainContent}>\r\n        <header className={styles.dashboardHeader}>\r\n          <h1>Backend Login Portal </h1>\r\n          <div className={styles.userInfo}>\r\n            <span>Secure Backend Login Portal </span>\r\n            <div className={styles.userAvatar}>\r\n              <div className={styles.avatarPlaceholder}>\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                  <path fillRule=\"evenodd\" d=\"M7.5 6a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM3.751 20.105a8.25 8.25 0 0116.498 0 .75.75 0 01-.437.695A18.683 18.683 0 0112 22.5c-2.786 0-5.433-.608-7.812-1.7a.75.75 0 01-.437-.695z\" clipRule=\"evenodd\" />\r\n                </svg>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </header>\r\n\r\n        <div className={styles.loginCard}>\r\n          <div className={styles.cardHeader}>\r\n            <h2>Backend Login Portal </h2>\r\n            <p>{step === 1 ? 'Enter your credentials' : 'Verify your identity'}</p>\r\n          </div>\r\n\r\n          <form onSubmit={handleSubmit} className={styles.loginForm}>\r\n            {step === 1 && (\r\n              <div className={styles.formStep}>\r\n                <div className={styles.inputGroup}>\r\n                  <label htmlFor=\"email\">Email Address</label>\r\n                  <input\r\n                    id=\"email\"\r\n                    type=\"email\"\r\n                    placeholder=\"Enter your email\"\r\n                    value={email}\r\n                    onChange={(e) => setEmail(e.target.value)}\r\n                    required\r\n                    disabled={loading}\r\n                  />\r\n                </div>\r\n\r\n                <div className={styles.inputGroup}>\r\n                  <label htmlFor=\"password\">Password</label>\r\n                  <input\r\n                    id=\"password\"\r\n                    type=\"password\"\r\n                    placeholder=\"Enter your password\"\r\n                    value={password}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                    required\r\n                    disabled={loading}\r\n                  />\r\n                </div>\r\n\r\n                <div className={styles.inputGroup}>\r\n                  <label htmlFor=\"role\">Role</label>\r\n                  <select\r\n                    id=\"role\"\r\n                    value={role}\r\n                    onChange={(e) => setRole(e.target.value)}\r\n                    required\r\n                    disabled={loading}\r\n                  >\r\n                    <option value=\"\">Select your role</option>\r\n                    <option value=\"admin\">Admin</option>\r\n                    <option value=\"manager\">Manager</option>\r\n                    <option value=\"engineer\">Engineer</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {step === 2 && (\r\n              <div className={styles.formStep}>\r\n                <div className={styles.otpInstructions}>\r\n                  <div className={styles.otpIcon}>\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                      <path fillRule=\"evenodd\" d=\"M12 1.5a5.25 5.25 0 00-5.25 5.25v3a3 3 0 00-3 3v6.75a3 3 0 003 3h10.5a3 3 0 003-3v-6.75a3 3 0 00-3-3v-3c0-2.9-2.35-5.25-5.25-5.25zm3.75 8.25v-3a3.75 3.75 0 10-7.5 0v3h7.5z\" clipRule=\"evenodd\" />\r\n                    </svg>\r\n                  </div>\r\n                  <p>We've sent a 6-digit verification code to your email address.</p>\r\n                </div>\r\n\r\n                <div className={styles.inputGroup}>\r\n                  <label htmlFor=\"otp\">Verification Code</label>\r\n                  <input\r\n                    ref={otpRef}\r\n                    id=\"otp\"\r\n                    type=\"text\"\r\n                    placeholder=\"Enter 6-digit code\"\r\n                    value={otp}\r\n                    onChange={(e) => setOtp(e.target.value)}\r\n                    maxLength={6}\r\n                    inputMode=\"numeric\"\r\n                    pattern=\"\\d{6}\"\r\n                    required\r\n                    disabled={loading}\r\n                  />\r\n                </div>\r\n\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleResendOtp}\r\n                  disabled={loading}\r\n                  className={styles.resendButton}\r\n                >\r\n                  {loading ? 'Resending...' : 'Resend Code'}\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {message && (\r\n              <div className={`${styles.message} ${message.includes('❌') ? styles.error : styles.success}`}>\r\n                {message.replace('✅', '').replace('❌', '')}\r\n              </div>\r\n            )}\r\n\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className={styles.submitButton}\r\n            >\r\n              {loading ? (\r\n                <span className={styles.buttonLoading}>\r\n                  <span className={styles.spinner}></span>\r\n                  {step === 1 ? 'Logging in...' : 'Verifying...'}\r\n                </span>\r\n              ) : step === 1 ? 'Login' : 'Verify Code'}\r\n            </button>\r\n          </form>\r\n\r\n          <div className={styles.cardFooter}>\r\n            <p>Having trouble signing in? <a href=\"admin/register\">Register here</a></p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className={styles.dashboardFooter}>\r\n          <p>© {new Date().getFullYear()} Admin Portal. All rights reserved.</p>\r\n          <div className={styles.footerLinks}>\r\n            <a href=\"#\">Privacy Policy</a>\r\n            <a href=\"#\">Terms of Service</a>\r\n            <a href=\"#\">Help</a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}