(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{136:(e,o,t)=>{"use strict";t.d(o,{default:()=>g});var r=t(5155),n=t(2115);t(2108);var s=t(5695),i=t(6874),a=t.n(i),l=t(8354),_=t.n(l),d=t(2698),c=t(5678),m=t.n(c);let u=()=>(0,r.jsx)("footer",{className:m().footer,children:(0,r.jsx)("div",{className:m().footerContainer,children:(0,r.jsx)("div",{className:m().footerBottom,children:(0,r.jsx)("p",{className:m().para,children:"\xa9 2025 IT Complaint Management System. All rights reserved."})})})}),g=()=>{let[e,o]=(0,n.useState)({email:"",password:""}),[t,i]=(0,n.useState)(""),[l,c]=(0,n.useState)(""),[m,g]=(0,n.useState)(!1),[p,h]=(0,n.useState)(!1);return(0,s.useRouter)(),e.email&&e.password,(0,r.jsxs)("div",{className:_().loginPage,children:[(0,r.jsxs)("header",{className:_().header,children:[(0,r.jsx)("div",{className:_().logoContainer,children:(0,r.jsx)("h1",{className:_().logoText,children:"IT Complaint Management"})}),(0,r.jsx)("nav",{className:_().nav,children:(0,r.jsxs)("ul",{className:_().navList,children:[(0,r.jsx)("li",{className:_().navItem,children:(0,r.jsx)(a(),{href:"/login",className:_().navLink,children:"Login"})}),(0,r.jsx)("li",{className:_().navItem,children:(0,r.jsx)(a(),{href:"/register",className:_().navLink,children:"Register"})})]})})]}),(0,r.jsx)(d.default,{}),(0,r.jsx)(u,{})]})}},2698:(e,o,t)=>{"use strict";t.d(o,{default:()=>_});var r=t(5155),n=t(2115),s=t(2108),i=t(5695),a=t(4814),l=t.n(a);function _(){let[e,o]=(0,n.useState)(""),[t,a]=(0,n.useState)(""),[_,d]=(0,n.useState)(""),[c,m]=(0,n.useState)(1),[u,g]=(0,n.useState)(""),[p,h]=(0,n.useState)(!1),f=(0,i.useRouter)(),x=(0,n.useRef)(null);(0,n.useEffect)(()=>{2===c&&x.current&&x.current.focus()},[c]);let v=async o=>{o.preventDefault(),h(!0),g("");let r=await (0,s.signIn)("credentials",{redirect:!1,email:e.trim(),password:t,role:"user",...2===c?{otp:_.trim()}:{}});if(h(!1),null==r?void 0:r.error)try{let e=JSON.parse(r.error);"OTP_REQUIRED"===e.code?(m(2),g("✅ OTP sent to your email. Please enter it below.")):g(e.message||"❌ Login failed.")}catch(e){g(r.error)}else f.push("/user/dashboard")},j=async()=>{h(!0),g("");let o=await fetch("/api/auth/send-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.trim(),role:"user"})}),t=await o.json();h(!1),o.ok?(m(2),g("✅ OTP sent to your email. Please enter it below.")):g((null==t?void 0:t.error)||"❌ Failed to send OTP.")},L=async()=>{h(!0),g("");let o=await fetch("/api/auth/send-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.trim(),role:"user"})}),t=await o.json();h(!1),o.ok?g("✅ OTP resent. Check your inbox."):g((null==t?void 0:t.error)||"❌ Failed to resend OTP.")};return(0,r.jsx)("div",{className:l().loginContainer,children:(0,r.jsxs)("div",{className:l().loginCard,children:[(0,r.jsxs)("div",{className:l().loginHeader,children:[(0,r.jsx)("h2",{children:"User Login"}),(0,r.jsx)("p",{children:"Welcome back! Please enter your details to sign in."})]}),(0,r.jsxs)("form",{onSubmit:v,className:l().loginForm,children:[1===c&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:l().inputGroup,children:[(0,r.jsx)("label",{htmlFor:"email",children:"Email"}),(0,r.jsx)("input",{id:"email",type:"email",placeholder:"Enter your email",value:e,onChange:e=>o(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:l().inputGroup,children:[(0,r.jsx)("label",{htmlFor:"password",children:"Password"}),(0,r.jsx)("input",{id:"password",type:"password",placeholder:"Enter your password",value:t,onChange:e=>a(e.target.value),required:!0})]}),(0,r.jsx)("button",{type:"button",onClick:j,disabled:!e||p,className:l().otpLink,children:p?"Sending OTP...":"Send OTP to Email"})]}),2===c&&(0,r.jsxs)("div",{className:l().otpContainer,children:[(0,r.jsxs)("div",{className:l().otpHeader,children:[(0,r.jsx)("h3",{children:"Verification Required"}),(0,r.jsx)("p",{children:"We've sent a 6-digit code to your email"})]}),(0,r.jsxs)("div",{className:l().inputGroup,children:[(0,r.jsx)("label",{htmlFor:"otp",children:"Enter verification code"}),(0,r.jsx)("input",{ref:x,id:"otp",type:"text",placeholder:"Enter 6-digit code",value:_,onChange:e=>d(e.target.value),maxLength:6,pattern:"\\d{6}",inputMode:"numeric",required:!0})]}),(0,r.jsxs)("div",{className:l().otpResend,children:[(0,r.jsx)("p",{children:"Didn't receive the code?"}),(0,r.jsx)("button",{type:"button",onClick:L,disabled:p,children:p?"Sending...":"Resend code"})]})]}),(0,r.jsx)("button",{type:"submit",disabled:p,className:l().submitButton,children:p?1===c?"Logging in...":"Verifying...":1===c?"Login":"Verify & Login"}),u&&(0,r.jsx)("div",{className:"".concat(l().message," ").concat(u.toLowerCase().includes("success")||u.includes("✅")?l().success:l().error),children:u})]}),(0,r.jsx)("div",{className:l().cardFooter,children:(0,r.jsxs)("p",{children:["Having trouble signing in? ",(0,r.jsx)("a",{href:"/register",children:"Register here"})]})})]})})}},4814:e=>{e.exports={loginContainer:"Login_loginContainer__hA_pw",loginCard:"Login_loginCard__SHhGx",loginHeader:"Login_loginHeader__NMeno",loginForm:"Login_loginForm__xVBFv",inputGroup:"Login_inputGroup__8lUG9",otpLink:"Login_otpLink__xvWQt",otpContainer:"Login_otpContainer__Z6EQi",otpHeader:"Login_otpHeader__BygG_",otpResend:"Login_otpResend__DDHXb",submitButton:"Login_submitButton__LYzpR",message:"Login_message__NVGU_",success:"Login_success__v2F9N",error:"Login_error__1AWB3",cardFooter:"Login_cardFooter__cdbUX"}},5025:(e,o,t)=>{Promise.resolve().then(t.bind(t,136))},5678:e=>{e.exports={footer:"Footer_footer__sgndA",para:"Footer_para__GUwh2",footerContainer:"Footer_footerContainer__HtJzp",footerSections:"Footer_footerSections__158b0",footerSection:"Footer_footerSection__fPhqa",logoContainer:"Footer_logoContainer__Pk06v",logoIcon:"Footer_logoIcon__pJ412",logoText:"Footer_logoText__uJGoV",footerDescription:"Footer_footerDescription__fPtiX",socialLinks:"Footer_socialLinks__FzJvN",footerLinks:"Footer_footerLinks__IfWvs",contactInfo:"Footer_contactInfo__SEObv",contactItem:"Footer_contactItem__mVh6K",contactIcon:"Footer_contactIcon__i3RT_",footerBottom:"Footer_footerBottom__7_6A5",footerBottomContent:"Footer_footerBottomContent__jHURk",legalLinks:"Footer_legalLinks__QfM1R",divider:"Footer_divider__9JTOM"}},5695:(e,o,t)=>{"use strict";var r=t(8999);t.o(r,"useRouter")&&t.d(o,{useRouter:function(){return r.useRouter}})},8354:e=>{e.exports={header:"Home_header__hrHn4",logoContainer:"Home_logoContainer__7m3gO",logoText:"Home_logoText__FQrqq",nav:"Home_nav__vFz2X",navList:"Home_navList__UyQ8g",navItem:"Home_navItem__N0JCD",navLink:"Home_navLink__C2dYB",mainContent:"Home_mainContent__f43tP",loginCard:"Home_loginCard__xUJVi",cardHeader:"Home_cardHeader__nL3_M",loginForm:"Home_loginForm__UFyAY",formGroup:"Home_formGroup__tLT6D",formLabel:"Home_formLabel__cTAaz",formInput:"Home_formInput___FCLC",passwordInputContainer:"Home_passwordInputContainer__UZyzf",passwordToggle:"Home_passwordToggle__WmqHD",forgotPassword:"Home_forgotPassword__OdoWw",loginButton:"Home_loginButton__RoEMh",spinner:"Home_spinner__f1khs",spin:"Home_spin__jWKAd",errorMessage:"Home_errorMessage__JPdkA",successMessage:"Home_successMessage__NReM9",registerCta:"Home_registerCta__o3ck5",registerLink:"Home_registerLink__40P0L",loginIllustration:"Home_loginIllustration__KFjaA",illustrationText:"Home_illustrationText__UIdjO"}}},e=>{e.O(0,[2805,2108,6874,8441,5964,7358],()=>e(e.s=5025)),_N_E=e.O()}]);