(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2454],{2340:e=>{e.exports={registerContainer:"Register_registerContainer__KVI5A",registerCard:"Register_registerCard__MvcoV",fadeIn:"Register_fadeIn__U2IUS",progressBar:"Register_progressBar__xTQTS",cardHeader:"Register_cardHeader__XYgKn",stepIndicator:"Register_stepIndicator__0eDmE",step:"Register_step__BM3dc",active:"Register_active__ovA_k",stepLine:"Register_stepLine__qbwdC",title:"Register_title__HyV3K",subtitle:"Register_subtitle__mBGEU",message:"Register_message__0g9fP",slideIn:"Register_slideIn__uQqDU",messageIcon:"Register_messageIcon__RkLSb",success:"Register_success__6rrOb",error:"Register_error__Su685",form:"Register_form__kR5M4",inputGroup:"Register_inputGroup__BGTGn",passwordStrength:"Register_passwordStrength__NAnSZ",strengthBar:"Register_strengthBar__Qfeq2",weak:"Register_weak__SAyuu",medium:"Register_medium__VhhH5",strong:"Register_strong__yK7i2",strengthText:"Register_strengthText__nZt3l",otpContainer:"Register_otpContainer__Kufje",otpInput:"Register_otpInput__qCmxx",otpHint:"Register_otpHint__nhyFx",inputGroupCheckbox:"Register_inputGroupCheckbox__grV5N",btnPrimary:"Register_btnPrimary__IRs3i",btnSecondary:"Register_btnSecondary__ygUU5",otpNote:"Register_otpNote__NhJXw",cardFooter:"Register_cardFooter__G5174",link:"Register_link__uVPUR",spinner:"Register_spinner__UAgda",spin:"Register_spin__Mk2Sw"}},3859:(e,s,t)=>{"use strict";t.d(s,{default:()=>l});var r=t(5155),a=t(2115),n=t(6874),i=t.n(n),o=t(5695),c=t(2340),d=t.n(c);function l(){let[e,s]=(0,a.useState)(1),[t,n]=(0,a.useState)({name:"",email:"",phone:"",password:"",confirmPassword:"",otp:""}),[c,l]=(0,a.useState)(!1),[p,u]=(0,a.useState)(!1),[m,h]=(0,a.useState)({text:"",type:""}),[_,g]=(0,a.useState)(0),[x,y]=(0,a.useState)(0),f=(0,a.useRef)(null),j=(0,o.useRouter)();(0,a.useEffect)(()=>{2===e&&f.current&&f.current.focus()},[e]),(0,a.useEffect)(()=>{if(x>0){let e=setTimeout(()=>y(x-1),1e3);return()=>clearTimeout(e)}},[x]),(0,a.useEffect)(()=>{if(p){let e=setInterval(()=>{g(e=>Math.min(e+10,90))},300);return()=>clearInterval(e)}g(0)},[p]);let w=e=>{n({...t,[e.target.name]:e.target.value})},b=async e=>{if(e.preventDefault(),h({text:"",type:""}),t.password.length<8?(h({text:"Password must be at least 8 characters.",type:"error"}),!1):t.password!==t.confirmPassword?(h({text:"Passwords do not match.",type:"error"}),!1):!!/^\d{10,15}$/.test(t.phone)||(h({text:"Enter a valid phone number.",type:"error"}),!1)){u(!0);try{let e=await fetch("/api/register/request-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,email:t.email,phone:t.phone,password:t.password})}),r=await e.json();e.ok?(s(2),n(e=>({...e,otp:""})),h({text:"OTP sent to your email. Please verify.",type:"success"}),y(60)):h({text:r.error||"Registration failed.",type:"error"})}catch(e){h({text:"An error occurred. Please try again.",type:"error"})}finally{u(!1)}}},N=async e=>{e.preventDefault(),u(!0),g(10),h({text:"",type:""});try{let e=await fetch("/api/register/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t.email,otp:t.otp,name:t.name,phone:t.phone,password:t.password})}),s=await e.json();e.ok?(g(100),h({text:"Registration successful. Redirecting...",type:"success"}),setTimeout(()=>j.push("/login"),1500)):h({text:s.error||"OTP verification failed.",type:"error"})}catch(e){h({text:"An error occurred during OTP verification.",type:"error"})}finally{u(!1)}},R=async()=>{if(!(x>0)){u(!0),h({text:"",type:""});try{let e=await fetch("/api/register/request-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name,email:t.email,phone:t.phone,password:t.password})}),s=await e.json();e.ok?(n(e=>({...e,otp:""})),h({text:"New OTP sent to your email.",type:"success"}),y(60)):h({text:s.error||"Failed to resend OTP.",type:"error"})}catch(e){h({text:"Error occurred while resending OTP.",type:"error"})}finally{u(!1)}}};return(0,r.jsx)("div",{className:d().registerContainer,children:(0,r.jsxs)("div",{className:d().registerCard,children:[(0,r.jsx)("div",{className:d().progressBar,style:{width:"".concat(_,"%")}}),(0,r.jsxs)("div",{className:d().cardHeader,children:[(0,r.jsxs)("div",{className:d().stepIndicator,children:[(0,r.jsx)("div",{className:"".concat(d().step," ").concat(e>=1?d().active:""),children:(0,r.jsx)("span",{children:"1"})}),(0,r.jsx)("div",{className:d().stepLine}),(0,r.jsx)("div",{className:"".concat(d().step," ").concat(e>=2?d().active:""),children:(0,r.jsx)("span",{children:"2"})})]}),(0,r.jsx)("h2",{className:d().title,children:1===e?"Create Account":"Verify Email"}),(0,r.jsx)("p",{className:d().subtitle,children:1===e?"Join us today!":"Enter the code sent to ".concat(t.email)})]}),m.text&&(0,r.jsxs)("div",{className:"".concat(d().message," ").concat("success"===m.type?d().success:d().error),children:[(0,r.jsx)("span",{className:d().messageIcon,children:"success"===m.type?"✓":"!"}),m.text]}),1===e?(0,r.jsxs)("form",{onSubmit:b,className:d().form,children:[(0,r.jsxs)("div",{className:d().inputGroup,children:[(0,r.jsx)("label",{htmlFor:"name",children:"Full Name"}),(0,r.jsx)("input",{id:"name",name:"name",placeholder:"Enter your full name",onChange:w,required:!0,disabled:p})]}),(0,r.jsxs)("div",{className:d().inputGroup,children:[(0,r.jsx)("label",{htmlFor:"email",children:"Email Address"}),(0,r.jsx)("input",{id:"email",name:"email",placeholder:"Enter your email",type:"email",onChange:w,required:!0,disabled:p})]}),(0,r.jsxs)("div",{className:d().inputGroup,children:[(0,r.jsx)("label",{htmlFor:"phone",children:"Phone Number"}),(0,r.jsx)("input",{id:"phone",name:"phone",placeholder:"Enter your phone number",onChange:w,required:!0,disabled:p})]}),(0,r.jsxs)("div",{className:d().inputGroup,children:[(0,r.jsx)("label",{htmlFor:"password",children:"Password"}),(0,r.jsx)("input",{id:"password",name:"password",type:c?"text":"password",placeholder:"Create a strong password",onChange:w,required:!0,disabled:p}),t.password&&(0,r.jsxs)("div",{className:d().passwordStrength,children:[(0,r.jsx)("div",{className:"".concat(d().strengthBar," ").concat(t.password.length<8?d().weak:t.password.length<12?d().medium:d().strong)}),(0,r.jsx)("span",{className:d().strengthText,children:t.password.length<8?"Weak":t.password.length<12?"Medium":"Strong"})]})]}),(0,r.jsxs)("div",{className:d().inputGroup,children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,r.jsx)("input",{id:"confirmPassword",name:"confirmPassword",type:c?"text":"password",placeholder:"Confirm your password",onChange:w,required:!0,disabled:p})]}),(0,r.jsxs)("div",{className:d().inputGroupCheckbox,children:[(0,r.jsx)("input",{type:"checkbox",id:"showPassword",checked:c,onChange:()=>l(e=>!e)}),(0,r.jsx)("label",{htmlFor:"showPassword",children:"Show Password"})]}),(0,r.jsx)("button",{type:"submit",disabled:p,className:d().btnPrimary,children:p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:d().spinner})," Sending OTP..."]}):"Continue"})]}):(0,r.jsxs)("form",{onSubmit:N,className:d().form,children:[(0,r.jsxs)("div",{className:d().otpContainer,children:[(0,r.jsx)("label",{children:"Verification Code"}),(0,r.jsx)("input",{name:"otp",placeholder:"• • • • • •",onChange:w,value:t.otp,ref:f,maxLength:6,inputMode:"numeric",pattern:"[0-9]*",required:!0,disabled:p,className:d().otpInput}),(0,r.jsx)("p",{className:d().otpHint,children:"Enter the 6-digit code sent to your email"})]}),(0,r.jsx)("button",{type:"submit",disabled:p,className:d().btnPrimary,children:p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:d().spinner})," Verifying..."]}):"Verify & Create Account"}),(0,r.jsx)("button",{type:"button",onClick:R,disabled:p||x>0,className:d().btnSecondary,children:p?"Sending...":x>0?"Resend in ".concat(x,"s"):"Resend Code"}),(0,r.jsx)("p",{className:d().otpNote,children:"Didn't receive the code? Check your spam folder or try again."})]}),(0,r.jsx)("div",{className:d().cardFooter,children:(0,r.jsxs)("p",{children:["Already have an account?"," ",(0,r.jsx)(i(),{href:"/login",className:d().link,children:"Sign In"})]})})]})})}},5695:(e,s,t)=>{"use strict";var r=t(8999);t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}})},8215:(e,s,t)=>{Promise.resolve().then(t.bind(t,3859))}},e=>{e.O(0,[943,6874,8441,5964,7358],()=>e(e.s=8215)),_N_E=e.O()}]);